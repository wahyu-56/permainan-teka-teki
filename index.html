<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Teka-Teki Hewan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: "Comic Sans MS", Arial, sans-serif;
    background: linear-gradient(135deg, #ffcc33, #ff9933);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.card {
    background: white;
    width: 90%;
    max-width: 420px;
    padding: 25px;
    border-radius: 20px;
    text-align: center;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    animation: fade 0.5s;
}

.hidden { display: none; }

h1, h2 {
    margin-top: 0;
}

button {
    background: #2196f3;
    border: none;
    color: white;
    padding: 12px 18px;
    border-radius: 12px;
    font-size: 16px;
    margin: 8px;
    cursor: pointer;
}

button:hover {
    background: #1976d2;
}

.choice {
    display: block;
    width: 100%;
    margin: 8px 0;
}

#musicBtn {
    background: #4caf50;
}

#musicBtn:hover {
    background: #388e3c;
}

.status {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

@keyframes fade {
    from {opacity:0; transform: scale(0.95);}
    to {opacity:1; transform: scale(1);}
}
</style>
</head>

<body>

<!-- HALAMAN NAMA -->
<div class="card" id="namePage">
    <h1>üïµÔ∏è‚Äç‚ôÇÔ∏è Detektif Cilik</h1>
    <p>Masukkan nama detektifmu</p>
    <input id="playerName" placeholder="Nama Detektif" style="padding:10px;width:80%;border-radius:10px;">
    <br><br>
    <button onclick="startMenu()">Mulai</button>
</div>

<!-- MENU -->
<div class="card hidden" id="menuPage">
    <h2 id="hello"></h2>
    <p>Pilih Level</p>
    <button onclick="startGame('mudah')">Mudah</button>
    <button onclick="startGame('sedang')">Sedang</button>
    <button onclick="startGame('sulit')">Sulit</button>
    <br>
    <button id="musicBtn">üéµ Musik</button>
</div>

<!-- GAME -->
<div class="card hidden" id="gamePage">
    <div class="status">
        <div id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <div id="timer"></div>
    </div>
    <h2 id="question"></h2>
    <div id="choices"></div>
</div>

<!-- HASIL -->
<div class="card hidden" id="resultPage">
    <h1>üéâ Selesai!</h1>
    <p id="resultText"></p>
    <p id="stars"></p>
    <button onclick="location.reload()">Main Lagi</button>
</div>

<script>
/* ===== AUDIO ===== */
let bgMusic = null;
let isMusicPlaying = false;

const correctSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_7c8f93f02c.mp3");
const wrongSound   = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_2b7cfc2f9c.mp3");

/* ===== DATA SOAL ===== */
const questions = {
    mudah: [
        {q:"Hewan apa yang mengeong?", a:["Kucing","Anjing","Ayam","Sapi"], c:0},
        {q:"Hewan yang bisa terbang?", a:["Ikan","Burung","Kucing","Kambing"], c:1},
        {q:"Hewan yang hidup di air?", a:["Sapi","Ayam","Ikan","Kuda"], c:2},
        {q:"Hewan berkaki empat?", a:["Ayam","Ular","Sapi","Ikan"], c:2},
        {q:"Hewan yang menggonggong?", a:["Kucing","Anjing","Burung","Ikan"], c:1}
    ],
    sedang: [
        {q:"Hewan tercepat di darat?", a:["Kuda","Macan","Cheetah","Sapi"], c:2},
        {q:"Hewan bertaring?", a:["Kambing","Harimau","Ayam","Kelinci"], c:1},
        {q:"Hewan nokturnal?", a:["Ayam","Burung Hantu","Sapi","Kuda"], c:1},
        {q:"Hewan pemakan daging?", a:["Singa","Sapi","Kelinci","Kuda"], c:0},
        {q:"Hewan melata?", a:["Katak","Ular","Kucing","Burung"], c:1}
    ],
    sulit: [
        {q:"Hewan amfibi?", a:["Ular","Katak","Elang","Singa"], c:1},
        {q:"Hewan herbivora?", a:["Singa","Harimau","Sapi","Serigala"], c:2},
        {q:"Hewan bertelur & menyusui?", a:["Ayam","Platipus","Ikan","Katak"], c:1},
        {q:"Hewan dengan echolocation?", a:["Kelelawar","Kuda","Gajah","Kucing"], c:0},
        {q:"Hewan berdarah dingin?", a:["Ayam","Sapi","Ular","Kucing"], c:2}
    ]
};

let level, index, score, lives, timerInterval, timeLeft, player;

/* ===== FUNGSI ===== */
function startMenu() {
    player = playerName.value || "Detektif";
    hello.innerText = `Halo, ${player} üëã`;
    show(menuPage);
}

function startGame(lvl) {
    level = lvl;
    index = 0;
    score = 0;
    lives = 3;
    shuffle(questions[level]);
    show(gamePage);
    loadQuestion();
}

function loadQuestion() {
    if (index >= 5 || lives <= 0) return endGame();

    livesDiv();
    question.innerText = questions[level][index].q;
    choices.innerHTML = "";

    questions[level][index].a.forEach((text,i)=>{
        const btn = document.createElement("button");
        btn.className = "choice";
        btn.innerText = text;
        btn.onclick = ()=>answer(i);
        choices.appendChild(btn);
    });

    if (level === "sulit") startTimer();
}

function answer(i) {
    stopTimer();
    if (i === questions[level][index].c) {
        correctSound.play();
        score += 20;
    } else {
        wrongSound.play();
        lives--;
    }
    index++;
    loadQuestion();
}

function startTimer() {
    timeLeft = 10;
    timer.innerText = `‚è±Ô∏è ${timeLeft}`;
    timerInterval = setInterval(()=>{
        timeLeft--;
        timer.innerText = `‚è±Ô∏è ${timeLeft}`;
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            lives--;
            index++;
            loadQuestion();
        }
    },1000);
}

function stopTimer() {
    clearInterval(timerInterval);
    timer.innerText = "";
}

function endGame() {
    show(resultPage);
    let stars = score >= 80 ? "‚≠ê‚≠ê‚≠ê" : score >= 50 ? "‚≠ê‚≠ê" : "‚≠ê";
    resultText.innerText = `${player}, skor kamu: ${score}`;
    document.getElementById("stars").innerText = stars;
}

/* ===== UTIL ===== */
function show(page) {
    document.querySelectorAll(".card").forEach(p=>p.classList.add("hidden"));
    page.classList.remove("hidden");
}

function shuffle(arr) {
    arr.sort(()=>Math.random()-0.5);
}

function livesDiv() {
    livesEl = "‚ù§Ô∏è".repeat(lives);
    document.getElementById("lives").innerText = livesEl;
}

/* ===== MUSIK FIX ===== */
musicBtn.onclick = () => {
    if (!bgMusic) {
        bgMusic = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_4c9c61e1d7.mp3");
        bgMusic.loop = true;
        bgMusic.volume = 0.5;
    }
    if (!isMusicPlaying) {
        bgMusic.play();
        isMusicPlaying = true;
        musicBtn.innerText = "‚è∏Ô∏è Matikan Musik";
    } else {
        bgMusic.pause();
        isMusicPlaying = false;
        musicBtn.innerText = "üéµ Musik";
    }
};
</script>

</body>
</html>
